import{_ as s,o as n,c as a,U as l}from"./chunks/framework.3eb667f5.js";const e="/assets/1.fa472aca.webp",p="/assets/2.02d086ce.webp",o="/assets/3.a8d00fe3.webp",r="/assets/4.e49428cb.webp",h=JSON.parse('{"title":"使用 caddy 自建 WebDAV 服务器","description":"","frontmatter":{},"headers":[],"relativePath":"life/caddy/caddy.md","lastUpdated":1695981325000}'),c={name:"life/caddy/caddy.md"},t=l(`<h1 id="使用-caddy-自建-webdav-服务器" tabindex="-1">使用 <em>caddy</em> 自建 <em>WebDAV</em> 服务器 <a class="header-anchor" href="#使用-caddy-自建-webdav-服务器" aria-label="Permalink to &quot;使用 *caddy* 自建 *WebDAV* 服务器&quot;">​</a></h1><p><a href="https://www.wbolt.com/go?_=0e121e780baHR0cHM6Ly9jYWRkeXNlcnZlci5jb20v" target="_blank" rel="noreferrer">Caddy Web服务器</a>是一个开源的、支持HTTP/2的Web服务器，用Go编写，该服务器被设计为简单、高效和便携。Caddy自称是“终极服务器”，旨在让网络托管“尽可能简单”。</p><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p>如果你需要一个WebDAV服务器用于同步你的数据，比如我--密码工具数据同步，当然市面上也有不少网盘类服务也提供这项功能，不过介于密码文件过于重要，所以放在自建的服务上还是让人放心一点。</p><h2 id="_1、准备" tabindex="-1">1、准备 <a class="header-anchor" href="#_1、准备" aria-label="Permalink to &quot;1、准备&quot;">​</a></h2><p>一台能够运行docker的机器，不限于NAS、软路由、或者一个刷了Linux的电视盒子，当然你也可以选择把服务直接安装到机器本体上（我不推荐这么做）。</p><h2 id="_2、安装" tabindex="-1">2、安装 <a class="header-anchor" href="#_2、安装" aria-label="Permalink to &quot;2、安装&quot;">​</a></h2><p><strong>拉取docker镜像</strong>：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#docker pull caddy</span></span>
<span class="line"><span style="color:#FFCB6B;">Using</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">latest</span></span>
<span class="line"><span style="color:#FFCB6B;">latest:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Pulling</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">library/caddy</span></span>
<span class="line"><span style="color:#A6ACCD;">579b34f0a95b: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">2f21cb0286ed: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">5444b3f9419d: Pull complete </span></span>
<span class="line"><span style="color:#A6ACCD;">3485ef64f848: Pull complete </span></span>
<span class="line"><span style="color:#FFCB6B;">Digest:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sha256:df239ca80315c8271f9e87a981fb47124831f8b5a7c85970249d2dfd712479a3</span></span>
<span class="line"><span style="color:#FFCB6B;">Status:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Downloaded</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">newer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">caddy:latest</span></span>
<span class="line"><span style="color:#FFCB6B;">docker.io/library/caddy:latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>创建一个文件夹用于存放配置文件和WebDAV同步数据用</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#mkdir caddy</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#cd caddy/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#mkdir config</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#mkdir data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#cd data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#mkdir dav</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>启动容器：</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9000</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">caddy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">caddy</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+e+'" alt="1"></p><p>使用浏览器访问ip:9000，如果出现上面图片的内容就说明你成功运行了caddy。</p><h2 id="_2、部署webdav" tabindex="-1">2、部署WebDAV <a class="header-anchor" href="#_2、部署webdav" aria-label="Permalink to &quot;2、部署WebDAV&quot;">​</a></h2><p>由于标准caddy运行程序并不包涵WebDAV插件，你可以访问caddy官网获取如何使用xcaddy去编译带有WebDAV的caddy。</p><p>或者选择和我一样的方式（<s>懒，不想继续看文档</s>）。</p><p>进入<a href="https://caddyserver.com/download" target="_blank" rel="noreferrer">caddy下载界面</a>：</p><p><img src="'+p+'" alt="2"></p><p>选择适合你自己的架构，我的机器是arm64的，如果你的机器是x86，请自行更换。</p><p>在搜索框输入webdav后选中插件：</p><p><img src="'+o+`" alt="3"></p><p>这时<strong>Extra features</strong>后面的数字变成1，表示成功，点击Download下载，得到文件<strong>caddy_linux_arm64_custom</strong></p><p>使用sftp工具上传该文件到机器上，并拷贝到 <strong>/caddy/data</strong> 下</p><p>停止容器：<code>docker stop caddy</code></p><p>删除容器：<code>docker rm -f caddy</code></p><p>在/caddy/config新建配置文件<strong>Caddyfile</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># The Caddyfile is an easy way to configure your Caddy web server.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Unless the file starts with a global options block, the first</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># uncommented line is always the address of your site.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># To use your own domain name (with automatic HTTPS), first make</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sure your domain&#39;s A/AAAA DNS records are properly pointed to</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># this machine&#39;s public IP, then replace &quot;:80&quot; below with your</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># domain name.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">:80 {</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Set this path to your site&#39;s directory.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">root * /data/dav</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">encode gzip</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># hide or remove certain response headers in Caddy</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">header / -Server</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Enable the static file server.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">route {</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C3E88D;">rewrite /dav /dav/</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">#webdav /dav/* {</span></span>
<span class="line"><span style="color:#A6ACCD;">        #	</span><span style="color:#C3E88D;">prefix /dav</span></span>
<span class="line"><span style="color:#89DDFF;">    	</span><span style="color:#676E95;font-style:italic;">#}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">file_server browse</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Another common task is to set up a reverse proxy:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># reverse_proxy localhost:8080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Or serve a PHP site through php-fpm:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># php_fastcgi localhost:9000</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Refer to the Caddy docs for more information:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># https://caddyserver.com/docs/caddyfile</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>再次启动容器：</p><div class="language-she line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">she</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 9000:80 \\</span></span>
<span class="line"><span style="color:#A6ACCD;"> 	-v /caddy/config:/etc/caddy \\</span></span>
<span class="line"><span style="color:#A6ACCD;"> 	-v /caddy/data:/data \\</span></span>
<span class="line"><span style="color:#A6ACCD;">	--name caddy caddy</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>进入容器：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">caddy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/sh</span></span>
<span class="line"><span style="color:#FFCB6B;">/srv</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># cd /</span></span>
<span class="line"><span style="color:#FFCB6B;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ls data</span></span>
<span class="line"><span style="color:#FFCB6B;">caddy_linux_arm64_custom</span></span>
<span class="line"><span style="color:#FFCB6B;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># cp data/caddy_linux_arm64_custom /usr/bin/</span></span>
<span class="line"><span style="color:#FFCB6B;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># cd /usr/bin/</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ls ca*</span></span>
<span class="line"><span style="color:#FFCB6B;">caddy</span><span style="color:#A6ACCD;">                     </span><span style="color:#C3E88D;">caddy_linux_arm64_custom</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">cal</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># mv caddy caddy_bak</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ls ca*</span></span>
<span class="line"><span style="color:#FFCB6B;">caddy_bak</span><span style="color:#A6ACCD;">                 </span><span style="color:#C3E88D;">caddy_linux_arm64_custom</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">cal</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># mv caddy_linux_arm64_custom caddy</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ls ca*</span></span>
<span class="line"><span style="color:#FFCB6B;">caddy</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">caddy_bak</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">cal</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/bin</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># chmod 755 caddy</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>将webdav配置的注释取消：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># The Caddyfile is an easy way to configure your Caddy web server.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Unless the file starts with a global options block, the first</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># uncommented line is always the address of your site.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># To use your own domain name (with automatic HTTPS), first make</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sure your domain&#39;s A/AAAA DNS records are properly pointed to</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># this machine&#39;s public IP, then replace &quot;:80&quot; below with your</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># domain name.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">:80 {</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Set this path to your site&#39;s directory.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">root * /data/dav</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">encode gzip</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># hide or remove certain response headers in Caddy</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">header / -Server</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Enable the static file server.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">route {</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C3E88D;">rewrite /dav /dav/</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C3E88D;">webdav /dav/* {</span></span>
<span class="line"><span style="color:#A6ACCD;">        	</span><span style="color:#C3E88D;">prefix /dav</span></span>
<span class="line"><span style="color:#A6ACCD;">    	}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">file_server browse</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Another common task is to set up a reverse proxy:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># reverse_proxy localhost:8080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Or serve a PHP site through php-fpm:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># php_fastcgi localhost:9000</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Refer to the Caddy docs for more information:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># https://caddyserver.com/docs/caddyfile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>重启容器：<code>docker restart caddy</code></p><p>再次访问ip:9000，出现下面界面成功部署WebDAV：</p><p><img src="`+r+`" alt="4"></p><h2 id="_3、增加用户密码" tabindex="-1">3、增加用户密码 <a class="header-anchor" href="#_3、增加用户密码" aria-label="Permalink to &quot;3、增加用户密码&quot;">​</a></h2><p>上面部署的服务没有用户密码是非常不安全的，任何人都能访问。</p><p>caddy配置不接受明文密码，可以在容器里使用下面命令进行对密码进行加密：实验账号：test 密码：123456</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">/srv</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># caddy hash-password</span></span>
<span class="line"><span style="color:#FFCB6B;">Enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Confirm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">$2a$14$zaOIqilDucUJ7AYG51fPP.mcFoPC4.kVJ3SzysjiIqAlceP/Hc0E2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>修改配置：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># The Caddyfile is an easy way to configure your Caddy web server.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Unless the file starts with a global options block, the first</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># uncommented line is always the address of your site.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># To use your own domain name (with automatic HTTPS), first make</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sure your domain&#39;s A/AAAA DNS records are properly pointed to</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># this machine&#39;s public IP, then replace &quot;:80&quot; below with your</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># domain name.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">:80 {</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Set this path to your site&#39;s directory.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">root * /data/dav</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">encode gzip</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># hide or remove certain response headers in Caddy</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">header / -Server</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Enable the static file server.</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">route {</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C3E88D;">rewrite /dav /dav/</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C3E88D;">webdav /dav/* {</span></span>
<span class="line"><span style="color:#A6ACCD;">        	</span><span style="color:#C3E88D;">prefix /dav</span></span>
<span class="line"><span style="color:#A6ACCD;">    	}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">file_server browse</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">basicauth {</span></span>
<span class="line"><span style="color:#A6ACCD;">    	</span><span style="color:#C3E88D;">test $2a$14$zaOIqilDucUJ7AYG51fPP.mcFoPC4.kVJ3SzysjiIqAlceP/Hc0E2</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Another common task is to set up a reverse proxy:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># reverse_proxy localhost:8080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Or serve a PHP site through php-fpm:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># php_fastcgi localhost:9000</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Refer to the Caddy docs for more information:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># https://caddyserver.com/docs/caddyfile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>重启容器：<code>docker restart caddy</code></p><p>再次访问网页，如果出现用户名密码框就部署成功。</p><p>4、待续（HTTPS）</p><p>WebDAV一般都需要端口映射到公网，并且为了稳定使用你一般需要域名加DDNS的方式。所以将目前的HTTP方式切换为HTTPS能够有效的保护自己的文件。</p><p>后面有时间再更新。</p>`,49),i=[t];function y(b,d,m,C,u,A){return n(),a("div",null,i)}const f=s(c,[["render",y]]);export{h as __pageData,f as default};
